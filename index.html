<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© | Ù†ÙˆÙ Ø®Ø¨ØªÙŠ</title>

  <style>
    :root{
      --bg1:#fff3fb;
      --bg2:#f1fff6;
      --bg3:#f3f6ff;

      --card: rgba(255,255,255,.82);
      --border: rgba(17,24,39,.10);
      --text:#111827;
      --muted:#6b7280;

      --shadow: 0 18px 40px rgba(0,0,0,.10);
      --radius: 22px;

      --p1:#ff5ea8; /* pink */
      --p2:#7c5cff; /* purple */
      --p3:#22c55e; /* green */
      --p4:#06b6d4; /* cyan */
      --p5:#f59e0b; /* orange */
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% 10%, var(--bg1), transparent 60%),
        radial-gradient(1000px 600px at 90% 20%, var(--bg2), transparent 55%),
        radial-gradient(900px 600px at 50% 95%, var(--bg3), transparent 55%),
        #ffffff;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:26px 18px;
    }

    .wrap{
      width:min(1120px, 100%);
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    /* ===== Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ø§Ù… ===== */
    .topHeader{
      text-align:center;
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 22px 18px;
    }
    .topHeader h1{
      margin:0;
      font-weight:1000;
      font-size:30px;
      letter-spacing:.2px;
    }
    .topHeader p{
      margin:8px 0 0;
      color: rgba(17,24,39,.72);
      font-weight:700;
      line-height:1.8;
      font-size:14px;
    }
    .topHeader hr{
      border:0;
      border-top:1px solid rgba(17,24,39,.08);
      margin:16px auto 0;
      width:min(680px, 92%);
    }

    /* ===== Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ø·Ø§Ù‚ØªÙŠÙ† ===== */
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:18px;
      align-items:stretch;
    }

    .card{
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
      min-height: 520px;
      display:flex;
      flex-direction:column;
    }

    /* ===== Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± (ÙŠØ³Ø§Ø±) ===== */
    .mediaWrap{
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      height:100%;
    }
    .stage{
      position:relative;
      flex:1;
      border-radius:18px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.72);
      overflow:hidden;
    }
    .stage .label{
      position:absolute;
      top:12px; right:12px; left:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      z-index:5;
      pointer-events:none;
    }
    .cap, .count{
      background: rgba(255,255,255,.78);
      border:1px solid var(--border);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
    }
    .cap{
      font-weight:950;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 75%;
    }
    .count{ color: var(--muted); }

    .viewer{
      position:absolute;
      inset:0;
      padding:12px;
      display:grid;
      place-items:center;
    }
    .viewer img, .viewer video, .viewer iframe{
      width:100%;
      height:100%;
      border:0;
      border-radius: 14px;
      object-fit:cover;
      background:#000;
    }

    .dots{
      display:flex;
      justify-content:center;
      gap:8px;
      flex-wrap:wrap;
      padding: 2px 0 0;
    }
    .dot{
      width:10px;height:10px;
      border-radius:999px;
      border:1px solid rgba(17,24,39,.20);
      background: rgba(255,255,255,.85);
      cursor:pointer;
      transition: .12s ease;
    }
    .dot.active{
      width:26px;
      background: linear-gradient(135deg,var(--p1),var(--p2));
      border-color: rgba(124,92,255,.35);
    }

    .controls{
      display:flex;
      gap:10px;
      margin-top:2px;
    }
    .chip{
      flex:1;
      border:1px solid var(--border);
      background: rgba(255,255,255,.90);
      border-radius:999px;
      padding:10px 12px;
      font-weight:950;
      cursor:pointer;
      user-select:none;
    }
    .chip:active{ transform: scale(.98); }

    /* ===== Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© (ÙŠÙ…ÙŠÙ†) ===== */
    .identityWrap{
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:14px;
      height:100%;
    }
    .identityTitle{
      text-align:center;
      font-size:24px;
      font-weight:1000;
      margin:0;
    }
    .vision{
      background: rgba(255,255,255,.70);
      border:1px solid var(--border);
      border-radius:18px;
      padding:14px;
      line-height:2;
      font-size:14.5px;
      color: rgba(17,24,39,.90);
      text-align:center;
    }

    .icons{
      margin-top:auto;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }

    .iconBtn{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 14px;
      border-radius:18px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.90);
      text-decoration:none;
      color:var(--text);
      transition: transform .15s ease, box-shadow .15s ease;
      min-height:76px;
    }
    .iconBtn:hover{
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0,0,0,.12);
    }

    .iconBtn .txt{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
    }
    .iconBtn .t{
      font-weight:1000;
      font-size:14px;
      line-height:1.2;
    }
    .iconBtn .d{
      font-size:12px;
      color:var(--muted);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 240px;
    }

    .iconBubble{
      width:44px;height:44px;
      border-radius:16px;
      display:grid;
      place-items:center;
      color:#fff;
      font-size:20px;
      flex:0 0 auto;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
    }

    /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙÙ‚Ø§Ø¹Ø§Øª */
    .g1{ background: linear-gradient(135deg,var(--p1),var(--p5)); }
    .g2{ background: linear-gradient(135deg,var(--p2),var(--p1)); }
    .g3{ background: linear-gradient(135deg,var(--p4),#3b82f6); }
    .g4{ background: linear-gradient(135deg,var(--p3),var(--p4)); }

    .foot{
      text-align:center;
      padding: 12px 16px;
      color: var(--muted);
      font-size: 12px;
      border-top:1px solid var(--border);
      background: rgba(255,255,255,.45);
    }

    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
      .card{ min-height: 520px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- âœ… Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ø§Ù… -->
    <header class="topHeader">
      <h1>Ù†ÙˆÙ Ø®Ø¨ØªÙŠ</h1>
      <p>Ù…Ø¹Ù„Ù…Ø© ÙÙŠØ²ÙŠØ§Ø¡ ÙˆÙ…Ø¨Ø§Ø¯ÙØ±Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©ØŒ Ø£Ø¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙŠØµÙ†Ø¹ Ø£Ø«Ø±Ù‹Ø§ Ù…Ø³ØªØ¯Ø§Ù…Ù‹Ø§.</p>
      <hr>
    </header>

    <!-- âœ… Ø§Ù„ØªØ±ØªÙŠØ¨ Ù‡Ù†Ø§ Ù‡Ùˆ Ø§Ù„Ù„ÙŠ ÙŠØ­Ø¯Ø¯ ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø± ÙÙŠ RTL -->
    <main class="grid">

      <!-- âœ… 1) ÙŠÙ…ÙŠÙ†: Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© (Ø£ÙˆÙ„ Ø¹Ù†ØµØ± = ÙŠÙ…ÙŠÙ†) -->
      <section class="card">
        <div class="identityWrap">
          <h2 class="identityTitle">Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</h2>

          <div class="vision">
            ØªØªØ´ÙƒÙ„ Ø±Ø¤ÙŠØªÙŠ Ù…Ù† ÙÙ„Ø³ÙØ© ØªØ±Ø¨ÙˆÙŠØ© ØªÙØ¹Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„ÙÙ‡Ù… ÙˆØ§Ù„Ù…Ø¹Ù†Ù‰ØŒ ÙˆØªØ¯Ø¹Ù…Ù‡Ø§ Ù…Ù…Ø§Ø±Ø³Ø§Øª ØªØ¯Ø±ÙŠØ³ÙŠØ© ØªÙØ­Ø³Ù† Ø§Ù„ØªØ¹Ù„Ù…
            ÙˆØªÙÙØ¹Ù„ Ø§Ù„Ø­ÙˆØ§Ø± ÙˆØ§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ø§Ù‚Ø¯ØŒ ÙˆØªØ³ØªØ«Ù…Ø± Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ¬ÙˆÙŠØ¯ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§ØªØ› Ø¨Ù…Ø§ ÙŠØµÙ†Ø¹
            Ø·Ø§Ù„Ø¨Ø© ÙˆØ§Ø«Ù‚Ø©ØŒ Ù…Ø³Ø¤ÙˆÙ„Ø©ØŒ ÙˆÙ‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ù‡Ø§ Ø§Ù„Ù…Ø¹Ø±ÙÙŠ.
          </div>

          <div class="icons" id="icons"></div>
        </div>

        <div class="foot">Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” Ù†ÙˆÙ Ø®Ø¨ØªÙŠ</div>
      </section>

      <!-- âœ… 2) ÙŠØ³Ø§Ø±: Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± (Ø«Ø§Ù†ÙŠ Ø¹Ù†ØµØ± = ÙŠØ³Ø§Ø±) -->
      <section class="card">
        <div class="mediaWrap">
          <div class="stage">
            <div class="label">
              <div class="cap" id="caption">â€”</div>
              <div class="count" id="counter">0/0</div>
            </div>
            <div class="viewer" id="viewer"></div>
          </div>

          <div class="dots" id="dots"></div>

          <div class="controls">
            <button class="chip" id="prevBtn">âŸµ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button class="chip" id="toggleBtn">â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù</button>
            <button class="chip" id="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ âŸ¶</button>
          </div>
        </div>

        <div class="foot">Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” Ù†ÙˆÙ Ø®Ø¨ØªÙŠ</div>
      </section>

    </main>
  </div>

<script>
  // ===== Ø±ÙˆØ§Ø¨Ø· CSV =====
  const LINKS_CSV_URL =
    "https://docs.google.com/spreadsheets/d/e/2PACX-1vQaN3UjaCfxytCPsU6tVG3q4Doq5MzAga4eN9DNn7CXHO2AgikUq0F3PggFNgMub2C2if6LoRuRDRoD/pub?output=csv";

  const MEDIA_CSV_URL =
    "https://docs.google.com/spreadsheets/d/e/2PACX-1vTEHayG4LZPyitS9dWgRweARkU4gWhGc0vxUFjZbOan32ZG6B9zSYpAKd02bE2nkysvXoIC3EH-iN4O/pub?output=csv";

  const INTERVAL_MS = 7000;

  // ===== CSV parser ÙŠØ¯Ø¹Ù… Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³ =====
  function splitCSVLine(line){
    const res = [];
    let cur="", inQ=false;
    for(let i=0;i<line.length;i++){
      const ch=line[i];
      if(ch === '"'){
        if(inQ && line[i+1] === '"'){ cur+='"'; i++; }
        else inQ=!inQ;
      } else if(ch === ',' && !inQ){
        res.push(cur); cur="";
      } else cur+=ch;
    }
    res.push(cur);
    return res.map(s=>s.trim());
  }

  function parseCSV(text){
    const lines = text.trim().split(/\r?\n/);
    if(lines.length <= 1) return {header:[], rows:[]};
    const header = splitCSVLine(lines[0]).map(s=>s.toLowerCase());
    const rows = [];
    for(let i=1;i<lines.length;i++){
      const row = splitCSVLine(lines[i]);
      if(row.join("").trim()==="") continue;
      rows.push(row);
    }
    return {header, rows};
  }

  function col(header, name){
    return header.indexOf(name.toLowerCase());
  }

  function escapeHTML(s){
    return String(s||"")
      .replaceAll("&","&amp;").replaceAll("<","&lt;")
      .replaceAll(">","&gt;").replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // ===== (A) Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª 2Ã—2 Ù…Ù† Ø´ÙŠØª Ø§Ù„Ø±ÙˆØ§Ø¨Ø· =====
  const iconsEl = document.getElementById("icons");

  async function loadIcons(){
    try{
      const r = await fetch(LINKS_CSV_URL, {cache:"no-store"});
      const t = await r.text();
      const {header, rows} = parseCSV(t);

      const tI = col(header, "title");
      const uI = col(header, "url");
      const iI = col(header, "icon");
      const dI = col(header, "desc");

      const links = rows.map(row => ({
        title: (row[tI]||"").trim(),
        url:   (row[uI]||"").trim(),
        icon:  (row[iI]||"ğŸ”—").trim(),
        desc:  (row[dI]||"").trim()
      })).filter(x => x.title && x.url).slice(0,4);

      iconsEl.innerHTML = "";
      const bubbleClasses = ["g1","g2","g3","g4"];

      links.forEach((L, idx) => {
        const a = document.createElement("a");
        a.className = "iconBtn";
        a.href = L.url;
        a.target = "_blank";
        a.rel = "noopener";

        a.innerHTML = `
          <div class="txt">
            <div class="t">${escapeHTML(L.title)}</div>
            <div class="d">${escapeHTML(L.desc || "")}</div>
          </div>
          <div class="iconBubble ${bubbleClasses[idx % 4]}">${escapeHTML(L.icon)}</div>
        `;
        iconsEl.appendChild(a);
      });

    }catch(e){
      iconsEl.innerHTML = `<div style="grid-column:1/-1;color:#ef4444;font-weight:900;text-align:center;">ØªØ¹Ø°Ø± Ù‚Ø±Ø§Ø¡Ø© Ø´ÙŠØª Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</div>`;
    }
  }

  // ===== (B) Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± + Ù†Ù‚Ø§Ø· =====
  const viewer = document.getElementById("viewer");
  const dotsEl = document.getElementById("dots");
  const captionEl = document.getElementById("caption");
  const counterEl = document.getElementById("counter");

  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const toggleBtn = document.getElementById("toggleBtn");

  let mediaItems = [];
  let idx = 0;
  let timer = null;
  let playing = true;

  function buildDots(){
    dotsEl.innerHTML = "";
    mediaItems.forEach((_, i) => {
      const b = document.createElement("button");
      b.className = "dot";
      b.type = "button";
      b.addEventListener("click", () => goTo(i, true));
      dotsEl.appendChild(b);
    });
    updateDots();
  }

  function updateDots(){
    const dots = dotsEl.querySelectorAll(".dot");
    dots.forEach((d,i)=> d.classList.toggle("active", i===idx));
  }

  function render(){
    if(!mediaItems.length){
      viewer.innerHTML = `<div style="color:#6b7280;font-weight:900;text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ³Ø§Ø¦Ø·</div>`;
      captionEl.textContent = "â€”";
      counterEl.textContent = "0/0";
      dotsEl.innerHTML = "";
      return;
    }

    const it = mediaItems[idx];
    captionEl.textContent = it.title || "â€”";
    counterEl.textContent = `${idx+1}/${mediaItems.length}`;
    updateDots();

    viewer.innerHTML = "";
    if(it.type === "image"){
      const img = document.createElement("img");
      img.src = it.url;
      img.alt = it.title || "image";
      viewer.appendChild(img);
    } else if(it.type === "video"){
      const v = document.createElement("video");
      v.src = it.url;
      v.autoplay = true;
      v.muted = true;
      v.loop = true;
      v.playsInline = true;
      v.controls = false;
      viewer.appendChild(v);
    } else if(it.type === "iframe"){
      const f = document.createElement("iframe");
      f.src = it.url; // Ø¨Ø¯ÙˆÙ† ØªØ­ÙˆÙŠÙ„
      f.allow = "autoplay; encrypted-media; picture-in-picture";
      f.referrerPolicy = "strict-origin-when-cross-origin";
      viewer.appendChild(f);
    } else {
      viewer.innerHTML = `<div style="color:#6b7280;font-weight:900;text-align:center;">Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ: ${escapeHTML(it.type)}</div>`;
    }
  }

  function goTo(newIdx, fromUser=false){
    if(!mediaItems.length) return;
    idx = (newIdx + mediaItems.length) % mediaItems.length;
    render();
    if(fromUser) start();
  }

  function start(){
    stop();
    timer = setInterval(()=>{ if(playing) goTo(idx+1, false); }, INTERVAL_MS);
  }
  function stop(){
    if(timer){ clearInterval(timer); timer=null; }
  }

  async function loadMedia(){
    try{
      const r = await fetch(MEDIA_CSV_URL, {cache:"no-store"});
      const t = await r.text();
      const {header, rows} = parseCSV(t);

      const tI = col(header, "type");
      const uI = col(header, "url");
      const cI = col(header, "title");

      mediaItems = rows.map(row => ({
        type: (row[tI]||"").trim().toLowerCase(),
        url:  (row[uI]||"").trim(),
        title:(row[cI]||"").trim()
      })).filter(x => x.type && x.url);

      idx = 0;
      buildDots();
      render();
      start();
    }catch(e){
      viewer.innerHTML = `<div style="color:#ef4444;font-weight:900;text-align:center;">ØªØ¹Ø°Ø± Ù‚Ø±Ø§Ø¡Ø© Ø´ÙŠØª Ø§Ù„ÙˆØ³Ø§Ø¦Ø·</div>`;
      dotsEl.innerHTML = "";
    }
  }

  prevBtn.addEventListener("click", ()=> goTo(idx-1, true));
  nextBtn.addEventListener("click", ()=> goTo(idx+1, true));
  toggleBtn.addEventListener("click", ()=>{
    playing = !playing;
    toggleBtn.textContent = playing ? "â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù" : "â–¶ï¸ ØªØ´ØºÙŠÙ„";
  });

  loadIcons();
  loadMedia();
</script>
</body>
</html>
